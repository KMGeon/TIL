# 아파치 카프카 개요

---

## 아파치 카프카
아파치 카프카는 여러 대의 분산 서버에서 대량의 데이터를 처리하는 분산 메시징 시스템이다. 메시지(데이터)를 받고, 받은 메시지를 다른 시스템이나 장치에 보내기 위해 사용된다.
카프카는 대량의 데이터를 높은 처리량과 실시간으로 취급하기 위한 제품으로 다음 4가지를 실현할 수 있다.

1. 확장성: 여러 서버로 확장 구성을 할수 있기 때문에 데이터 양에 따라 시스템 확장이 가능하다.
2. 영속성: 수신한 데이터를 디스크에 유지할수 있기 때문에 언제라도 데이터를 읽을 수 있다.
3. 유연성: 연계할 수 있는 제품이 많기 때문에 제품이나 시스템을 연결하는 허브 역할을 한다.
4. 신뢰성: 메시지 전달 보증을 하므로 데이터 분실 걱정하지 않아도 된다.

- 카프카는 원래 높은 처리량으로 데이터를 실시간 처리하는 처리 성능에 초점을 두었고, 이후 기능과 신뢰성을 향샹시켜 현재는 종합 스트림 처리를 위한 플랫폼이 되고 있다.


## 요구 사항
1. `높은 처리량`으로 실시간 처리한다. 
2. 임이의 타이밍에 데이터를 읽는다. 
3. 다양한 제품과 시스템에 쉽게 연동한다. 
4. 메시지를 잃지 않는다.



## 기존 시스템의 한계

### 메시지 큐의 한계
- 강력한 전달 보증이 오버스펙
- 스케일 아웃 어려움
- 대량 메시지 축적 고려 안됨

### 로그 수집 시스템의 한계
- HDFS 기반 배치처리만 고려
- API 사용 어려움
- 수신측의 자유로운 메시지 수신 어려움

### ETL 도구의 한계
- 파일 단위 처리
- 임의 타이밍 메시지 수신 어려움

## Kafka의 해결방안

### 메시징 모델과 스케일 아웃
- Producer, Broker, Consumer 구조
- Consumer Group 개념 도입으로 확장성 확보
- 큐잉모델과 Pub/Sub 모델의 장점 결합

### 데이터 영속화
- 디스크 기반 데이터 저장
- 장기 보존 가능
- 높은 처리량 유지

### API 제공
- Connect API로 외부 시스템 연동
- Kafka Connect 프레임워크
- Streams API 제공

### 전달 보증
- At Most Once
- At Least Once
- Exactly Once (후기 도입)
- Ack와 Offset Commit 개념 사용


---

## 참고

- https://www.hanbit.co.kr/channel/category/category_view.html?cms_code=CMS9400468504